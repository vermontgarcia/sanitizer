(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,a,t){e.exports=t(293)},139:function(e,a,t){},291:function(e,a,t){},293:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(11),l=t.n(o),s=(t(139),t(27)),c=t(28),i=t(32),m=t(29),u=t(33),p=t(297),d=t(295),h=(t(53),t(24)),f=(t(144),t(37)),g=t(69),v=t.n(g),E="localhost"===window.location.hostname?"http://localhost:3500/api":"https://messagesanitizer.herokuapp.com/api",y=function(e,a){v.a.post("".concat(E,"/auth/signup"),e).then(function(e){f.a.success(e.data.msg),a.push("/")}).catch(function(e){f.a.error(e.response.data.msg)})},b=function(e,a){v.a.post("".concat(E,"/auth/login"),e).then(function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),f.a.success(e.data.msg),a.push("/")}).catch(function(e){void 0===e.response?f.a.error("Network error!"):f.a.error(e.response.data.msg)})},w=function(e){function a(){return Object(s.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentWillMount",value:function(){localStorage.getItem("token")?function(e){var a=localStorage.getItem("token");v.a.get("".concat(E,"/auth/loggedin"),{headers:{"x-access-token":a}}).then(function(e){}).catch(function(a){f.a.error(a.response.data.msg),localStorage.removeItem("token"),e.push("/login")})}(this.props.history):this.props.history.push("/login")}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",null,"Home"),n.a.createElement(h.a,{type:"primary"},"Clik on me!"))}}]),a}(r.Component),k=function(){return n.a.createElement("h1",null,"Not found")},O=(t(116),t(68)),j=(t(117),t(35)),S=(t(118),t(5)),N=(t(122),t(34)),F=t(294),P=N.a.Item;var x=function(e){function a(){var e,t;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(n)))).handleSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){e||(console.log("Received values of form: ",a),b(a,t.props.history))})},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e,a=this.props.form,t=a.getFieldDecorator,r=a.getFieldsError,o=a.getFieldError,l=a.isFieldTouched,s=l("userName")&&o("userName"),c=l("password")&&o("password");return n.a.createElement("div",{className:"login-envelop"},n.a.createElement("div",null,n.a.createElement("img",{src:"logo.png",alt:"PROSA logo"})),n.a.createElement("div",null,n.a.createElement(N.a,{onSubmit:this.handleSubmit,className:"form-envelop"},n.a.createElement("div",null,n.a.createElement("h1",null,"Login")),n.a.createElement(P,{validateStatus:s?"error":"",help:s||""},t("userName",{rules:[{required:!0,message:"Type your username!"}]})(n.a.createElement(j.a,{prefix:n.a.createElement(S.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),n.a.createElement(P,{validateStatus:c?"error":"",help:c||""},t("password",{rules:[{required:!0,message:"Type your password!"}]})(n.a.createElement(j.a,{prefix:n.a.createElement(S.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),n.a.createElement(P,null,t("remember",{valuePropName:"checked",initialValue:!0})(n.a.createElement(O.a,null,"Remember me.")),n.a.createElement(F.a,{className:"login-form-forgot",to:"/forgot"},"Forgot password."),n.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button",disabled:(e=r(),Object.keys(e).some(function(a){return e[a]}))},"Login"),"Or ",n.a.createElement(F.a,{to:"/signup"},"register now!")))))}}]),a}(r.Component),C=N.a.create({name:"login-form"})(x),D=N.a.Item;var T=function(e){function a(){var e;return Object(s.a)(this,a),(e=Object(i.a)(this,Object(m.a)(a).call(this))).handleSubmit=function(a){a.preventDefault(),e.props.form.validateFields(function(a,t){a||y(t,e.props.history)})},e.handleConfirmBlur=function(a){var t=a.target.value;e.setState({confirmDirty:e.state.confirmDirty||!!t})},e.compareToFirstPassword=function(a,t,r){var n=e.props.form;t&&t!==n.getFieldValue("password")?r("\xa1La contrase\xf1a no coincide!"):r()},e.validateToNextPassword=function(a,t,r){var n=e.props.form;t&&e.state.confirmDirty&&n.validateFields(["confirm"],{force:!0}),r()},e.validateCheckedAgreement=function(e,a,t){!1===a&&t("Please confirm the agreement!"),t()},e.state={confirmDirty:!1,autoCompleteResult:[]},e}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e,a=this.props.form,t=a.getFieldDecorator,r=a.getFieldsError,o=a.getFieldError,l=a.isFieldTouched,s=l("name")&&o("name"),c=l("email")&&o("email"),i=l("password")&&o("password"),m=l("confirm")&&o("confirm"),u=l("agreement")&&o("agreement");return n.a.createElement("div",{className:"signup-envelop"},n.a.createElement("div",null,n.a.createElement("img",{className:"prosa-logo",src:"logo.png",alt:"PROSA logo"})),n.a.createElement("div",null,n.a.createElement(N.a,{onSubmit:this.handleSubmit,className:"form-envelop"},n.a.createElement("div",null,n.a.createElement("h1",null,"Register")),n.a.createElement(D,{validateStatus:s?"error":"",help:s||""},t("name",{rules:[{required:!0,message:"Please enter your name",whitespace:!0}]})(n.a.createElement(j.a,{prefix:n.a.createElement(S.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"What is your name?"}))),n.a.createElement(D,{validateStatus:c?"error":"",help:c||""},t("email",{rules:[{type:"email",message:"Please enter a valid email!"},{required:!0,message:"Please enter your email!"}]})(n.a.createElement(j.a,{prefix:n.a.createElement(S.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"user.name@prosa.com.mx"}))),n.a.createElement(D,{validateStatus:i?"error":"",help:i||""},t("password",{rules:[{required:!0,message:"Please enter your password"},{validator:this.validateToNextPassword}]})(n.a.createElement(j.a,{prefix:n.a.createElement(S.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),n.a.createElement(D,{validateStatus:m?"error":"",help:m||""},t("confirm",{rules:[{required:!0,message:"Please, confirm your password!"},{validator:this.compareToFirstPassword}]})(n.a.createElement(j.a,{prefix:n.a.createElement(S.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm your password"}))),n.a.createElement(D,{validateStatus:u?"error":"",help:u||""},t("agreement",{rules:[{required:!0,message:"Please confirm agreement!"},{validator:this.validateCheckedAgreement}],valuePropName:"checked"})(n.a.createElement(O.a,null,"I have read and accept the ",n.a.createElement(F.a,{to:"/agreement"},"agreement.")))),n.a.createElement(D,null,n.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button",disabled:(e=r(),Object.keys(e).some(function(a){return e[a]}))},"Register"),"Already have an account? ",n.a.createElement(F.a,{to:"/login"},"Login")))))}}]),a}(r.Component),I=N.a.create({name:"signup-form"})(T),q=function(){return n.a.createElement(p.a,null,n.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return n.a.createElement(w,e)}}),n.a.createElement(d.a,{exact:!0,path:"/login",render:function(e){return n.a.createElement(C,e)}}),n.a.createElement(d.a,{exact:!0,path:"/signup",render:function(e){return n.a.createElement(I,e)}}),n.a.createElement(d.a,{path:"*",component:k}))},A=t(298),R=(t(291),function(e){function a(){return Object(s.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(q,null))}}]),a}(r.Component)),L=Object(A.a)(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=t(296);l.a.render(n.a.createElement(function(){return n.a.createElement(W.a,null,n.a.createElement(L,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[134,2,1]]]);
//# sourceMappingURL=main.27756287.chunk.js.map